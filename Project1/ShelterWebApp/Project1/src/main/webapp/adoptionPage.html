<!--

Authour: Kira Herb
Date: 4/27/20
Purpose: The purpose of this page is to display a general overview of the staff
Last Updated:5/1/20
Last Updated:Added script for Ajax
    
-->

<!DOCTYPE html>

<html lang="en">

  <head>
    
        <meta charset="UTF-8" />
    
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
        <title>Adoption Page</title><!--Title of tab -->

        <!---

          adds a connection to bootstrap
        
        -->    

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

      <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.7.1.min.js"></script>
      <script type="text/javascript" src="adoptionPage.js"></script>
    </head>

    <body>

        <div id = "navigation" class="p-3 mb-2 bg-info text-white" > 

            <!---
      
            This is the navigation div. This is for the navigation bar. 
            Each element is a reference to another html page.
            The '|'s are for readably.
            The class "p-3 mb-2 bg-info text-white"turns the background to teal.
          
            -->
                  
            <a href = "userAuth.html" class="text-dark">Home</a>
      
            |
      
            <a href = "userAuth.html" class = "text-dark">Adopt today!</a>
      
            |
        
            <a href = "userAuth.html" class = "text-dark">Submit for adoption</a>
      
            |
        
            <a href = "userAuth.html" class = "text-dark">About us</a>
      
          </div> <!--end of div id = "navigation" class="p-3 mb-2 bg-info text-white-->
  
        <p></p>

        <!--Sets up the responsive bootstrap breaks the page apart into 12 parts col-md-6 on a med screen will take up half the page -->

        <div class = "row">

            <div class = "col-md-6">

                    <div id = searchbar>

                        <select id="type" name="type"> <!--creates a drop down box the user can select from-->

                            <option value="any">any</option><!--Sets up the values the user can choose from-->

                            <option value="cat">cat</option> 
                    
                            <option value="dog">dog</option>
            
                        </select> <!--Closes the select box-->

                        <select id="gender" name="gender">

                            <option value="any">any</option>
                    
                            <option value="female">female</option>
                    
                            <option value="male">male</option>
                
                        </select> <!--Sets up the responsive bootstrap breaks the page apart into 12 parts col-md-6 on a med screen will take up half the page -->

                        <select id="age" name="age">

                            <option value="any">any</option>
                    
                            <option value="under_1">under 1</option>
                    
                            <option value="1_years">1 year</option>
                    
                            <option value="2_years">2 years</option>
                    
                            <option value="3_years">3 years</option>
                    
                            <option value="4_years">4 years</option>
                    
                            <option value="5+">5+</option>
                
                        </select> <!--end oselect id="Age" name="Age"-->
        
                        <button id = "search" >Search</button>

                    </div><!--div id = searchbar"-->

                    <h2>Results</h2>

                    <div id = results>
                   
                        My Results
            
                    </div> <!--div id = results-->

            </div><!--div class = "col-md-6-->

        </div><!--div class = "row"-->

        <script>

            document.addEventListener("DOMContentLoaded", () => {
                document.querySelector('#search').addEventListener('click', (e) => {
                    e.preventDefault();
                    let inpt = document.querySelector('#age');
                    let intAge = inpt.getAttribute("#age");
                    const reqBody = {intAge};
                    const xhr = new XMLHttpRequest();
                    xhr.onreadystatechange = () => {
                        if(xhr.readyState === 4) {
                            if(xhr.status === 400) {
                                alert("Your request was invalid");
                            } else if(xhr.status === 200) {
                                const p = document.createElement('p');
                                p.innerHTML = JSON.parse(xhr.responseText).name;
                                document.body.appendChild(p);
                            }
                        }
                    };

                    xhr.open("POST", "http://localhost:8080/shelterwebapp/petservlet/searchQuery");
                    xhr.setRequestHeader("Content-Type", "application/json");
                    xhr.send(JSON.stringify(reqBody));

                });

            })

        </script>

    </body><!--end of body-->

</html><!--end of html-->