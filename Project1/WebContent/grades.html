<!DOCTYPE html>
<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>Grades</title>
		<link rel="stylesheet" type="text/css" href="stylesheet.css">
	</head>
	<body>
		<table id="grade_table">
  			<tr style="background-color:rgb(255,232,232);">
    			<th>Assignment</th>
    			<th>Grade</th>
    			<th>Max Points</th>
    			<th>Date Submitted</th>
    			<th>Due Date</th>
  			</tr>
		</table>
		<script type="text/javascript">
			/*document.getElementById("grade_table").addEventListener("click",(e) => {
				alert(e.value);
			})*/
		
			let xhr = new XMLHttpRequest();
			xhr.onreadystatechange = () => {
			    if (xhr.readyState == 4 && xhr.status == 200) {
			    	let gradeArr = JSON.parse(xhr.responseText);
			    	let val = 1;
			    	let table = document.getElementById("grade_table");
			    	for(let grade of gradeArr.grades){
			    		let row = table.insertRow(val++);
			    		let cell1 = row.insertCell(0);
			    		let cell2 = row.insertCell(1);
			    		let cell3 = row.insertCell(2);
			    		let cell4 = row.insertCell(3);
			    		let cell5 = row.insertCell(4);
			    		let cell6 = row.insertCell(5);
			    		cell1.innerHTML = grade.assignmentName;
			    		cell2.innerHTML = grade.gradePoints;
			    		cell3.innerHTML = grade.maxPoints;
			    		cell4.innerHTML = grade.submitDate;
			    		cell5.innerHTML = grade.dueDate;
			    		cell6.innerHTML = grade.assignmentID;
			    		cell6.style.display = "none";
			    		row.addEventListener("click",() => {
			    			alert(row.cells[5].innerHTML)
			    		})
			    	}
			    }
			};
			xhr.open("GET", "get-grades");
			xhr.send();
		</script>
	</body>
</html>