pipeline {
   agent any

   stages {
      stage('WAR Generation') {
         steps {
		    withMaven(maven : 'mvn'){
			sh 'mvn clean package'
		}
         }
      }
      stage('Docker Image Build'){
	    steps {
			sh 'docker build . -t cc:v0'
	    }
      }
      stage('Docker Hub Image Push'){
	    steps {
			sh 'docker tag cc:v0 jeanaldoph/voldemort:cc'
			sh 'docker push jeanaldoph/voldemort:cc'
		}
	  }
    }
}
