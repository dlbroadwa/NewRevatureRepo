<!DOCTYPE html>
<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>Online Gradebook</title>
		<link rel="stylesheet" type="text/css" href="stylesheet.css">
	</head>
	<body>
		<div class="box">
		<h1 class="titles" style="line-height: 30px;"><u>Online Gradebook</u></h1>
		<ul class='error' id="error_message">
			<li>Username and password do not match.</li>
		</ul>
		<form class="text" method="POST">
			<label for="username" class="text"><B>School ID: </B></label>
			<input id="userId" type="text" placeholder="Enter Username" name="user_id" required>
			<br><br>
			<label for="password" class="text"><B>Password: </B></label>
			<input id="userPass" type="password" placeholder="Enter Password" name="user_password" required>
			<br><br>
			<button class="square" type="submit" id="submitButton">Login</button>
		</form><br>
		</div>
		<script type="text/javascript">
			document.getElementById('submitButton').addEventListener('click', (e) => {
				e.preventDefault();
				let userId = document.getElementById("userId").value;
				let userPass = document.getElementById("userPass").value;
				const reqBody = {userId, userPass};
				const xhr0 = new XMLHttpRequest();
				xhr0.onreadystatechange = () => {
					if(xhr0.readyState === 4 && xhr0.status === 200) {
						let loginStatus = xhr0.responseText;
						if (loginStatus == 'true') {
							window.location.href = "courses";
						} else {
							document.getElementById("error_message").style.display = "block";
						}
					}
				};
				xhr0.open("POST", "login");
				xhr0.setRequestHeader("Content-Type", "application/json");
				xhr0.send(JSON.stringify(reqBody));
			});
		</script>
	</body>
</html>